{% extends "network/layout.html" %}

{% block body %}
<div class='mx-auto'>
    {% load static %}
    {% if user.is_authenticated %}
    <form action="{% url 'network:index' %}" method="post" class="mx-auto" style="width:40%;">
        {% csrf_token %}
        <div class="form-group mb-0"> {{post_form.post }} </div>
        <input name = "post" class="btn btn-primary" type="submit" value="Post">
    </form>
    <p></p>
    {% endif %}

    <P class="border rounded-top bg-info text-white mx-auto my-0 p-1" style="width:40%">Posts</p>
    
    <div class="pagination mx-auto my-0" style="width:40% ;">
        <span class="step-links">
            {% if page_obj.has_previous %}
                <a href="?page=1">&laquo; first</a>
                <a href="?page={{ page_obj.previous_page_number }}">previous</a>
            {% endif %}
    
            <span class="current">
                Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
            </span>
    
            {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}">next</a>
                <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
            {% endif %}
        </span>
    </div>
    
    <div class="border rounded-bottom mx-auto my-0" style="width:40% ;">
        {% for post in page_obj %}
            <p class="text-info d-flex rounded mx-auto my-0 p-1" style="width:90% ;">
                <a href="{% url 'network:profile' post.poster.id %}"> {{post.poster}}</a>         
                <small class="text-secondary text-right p-1">
                    posted {{post.post_time}} 
                </small>
            </p>
            <p class="d-flex border rounded mx-auto bg-light text-sm-left-justify p-1 my-0" style="width:90%;">{{post.post}} </p>
            <img class="ml-4 mb-2 mt-1" src="{% static 'network/like.png' %}" alt="No image available" width="20" height="20">
            {{post.likes}} 
        {% endfor %}
    </div>

</div>    
{% endblock %}